[TOC]
# 块流

## 1.简介
文档规定实时消息协议块流（RTMP 块流）。分块为更高层的多媒体流协议提供复用和分组服务。</br>
虽然RTMP块流是为协同RTMP协议工作而设计的，但是它仍然可以处理任何发送消息流的协议。
每个消息包含时间戳和负载类型标志。RTMP块流和RTMP共同适用于各种形式的音视频应用，
从点到点和点到多的实时直播，到vod服务，到交互式视频会议。</br>
当配合像[TCP]这样的可靠传输协议使用时，RTMP块流保证跨流的所有消息按时间戳序列一个接一个地传输。RTMP块流不提供优先级或类似的控制，但是可以通过更高层的协议提供类似的服务。
例如，视频直播服务可以基于每个消息的发送时间和答复时间选择丢弃视频消息，使慢的客户端能及时接受到音频消息。</br>
RTM块流包含自己的带内协议控制消息，并且提供了让更高层的协议嵌入用户控制消息的机制。

### 1.1 术语
本文档中的关键词”必须”、”一定不”、”要求”、”可以”、”不可以”、”应该”、”不应该”、”建议”、”可能”和”可选”的解释参考文档[BCP14][RFC2119]。

## 2.定义
- 负载：分组中所包含的数据。例如音频样本和压缩视频数据。负载格式和解释不在本文档的描述范围之内。
- 分组：一个数据分组由固定的头和负载数据组成。一些底层协议可能需要定义分组的封装。
- 端口：在一个给定计算机中区分不同目标的抽象。在TCP/IP协议中用一个小的整数来表示端口。OSI中的传输选择器等同于端口的概念。
- 传输地址：用于表示一个传输层终端的网络地址和端口的组合。例如IP地址和TCP端口。分组从源地址传输到目标地址。
- 消息流：允许消息流动的逻辑上的通讯通道
- 消息流ID： 每个消息所关联的ID，用于区分其所在的消息流。
- 块：一个消息片段。消息通常在被放到网络上传输之前被分成小的部分并且被交错存取。分块确保跨流的所有消息按时间戳顺序被不断的传输。
- 块流：允许块按照某一方向流动的逻辑上的通讯通道。块流可以从客户端流向服务端，也可以从服务端流向客户端。
- 块流ID：每个块所关联的用于区分其所在块流的ID。
- 复用：把分开的音视频数据整合到一个数据流，让多个音视频流可以同步地传输的过程。
- 解复用：复用的反向过程。交互的音视频数据被收集成原始的音频数据和视频数据。

